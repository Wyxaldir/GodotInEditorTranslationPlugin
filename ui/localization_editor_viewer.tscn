[gd_scene load_steps=7 format=3 uid="uid://cf8i6e6rrh64m"]

[ext_resource type="Texture2D" uid="uid://c8eorfmyiwks5" path="res://addons/localization_editor_viewer/ui/icons/expand_text.svg" id="1"]
[ext_resource type="Script" path="res://addons/localization_editor_viewer/ui/localization_editor_viewer.gd" id="2"]
[ext_resource type="Texture2D" uid="uid://drkn2cdpuiqfm" path="res://addons/localization_editor_viewer/ui/icons/folder.svg" id="3"]
[ext_resource type="Theme" uid="uid://c3b26tjhe55x1" path="res://addons/localization_editor_viewer/ui/themes/panel_theme.tres" id="3_sb83f"]
[ext_resource type="Texture2D" uid="uid://c4lqj4qygso46" path="res://addons/localization_editor_viewer/ui/icons/save.svg" id="6"]
[ext_resource type="PackedScene" uid="uid://b2p2yem5xrqlg" path="res://addons/localization_editor_viewer/ui/translation_key_browser_popup.tscn" id="10"]

[node name="LocalizationEditorViewer" type="VBoxContainer"]
offset_right = 427.0
offset_bottom = 139.0
script = ExtResource("2")

[node name="Spacer" type="Control" parent="."]
layout_mode = 2

[node name="KeyInput" type="HBoxContainer" parent="."]
layout_mode = 2

[node name="TitleLabel" type="Label" parent="KeyInput"]
layout_mode = 2
text = "ITEM_NAME_HEALING_PILL"

[node name="TranslationKeyBrowserPopup" parent="KeyInput/TitleLabel" instance=ExtResource("10")]
visible = false

[node name="KeyInput" type="LineEdit" parent="KeyInput"]
layout_mode = 2
size_flags_horizontal = 3
tooltip_text = "The input field for the position key. 
If a valid key in inputted, the translated text will be shown below. 
You can browse available keys with the folder button to the right."
placeholder_text = "Type key here..."
clear_button_enabled = true

[node name="LanguageSelectButton" type="OptionButton" parent="KeyInput"]
custom_minimum_size = Vector2(50, 0)
layout_mode = 2
focus_mode = 0

[node name="TextContainer" type="PanelContainer" parent="."]
layout_mode = 2

[node name="HBoxContainer" type="HBoxContainer" parent="TextContainer"]
layout_mode = 2
theme_override_constants/separation = 3

[node name="TranslatedText" type="TextEdit" parent="TextContainer/HBoxContainer"]
custom_minimum_size = Vector2(0, 100)
layout_mode = 2
size_flags_horizontal = 3
tooltip_text = "The translated version of the key input above. 
Editing this does nothing unless you save it to a .csv using the save button in the top-right of the ui."
text = "x"
placeholder_text = "Type translated string here..."
drag_and_drop_selection_enabled = false
virtual_keyboard_enabled = false

[node name="VBoxContainer" type="VBoxContainer" parent="TextContainer/HBoxContainer"]
layout_mode = 2

[node name="ShowTextPopoutButton" type="Button" parent="TextContainer/HBoxContainer/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
focus_mode = 0
theme = ExtResource("3_sb83f")
icon = ExtResource("1")

[node name="PickerButton" type="Button" parent="TextContainer/HBoxContainer/VBoxContainer"]
layout_mode = 2
tooltip_text = "Browse valid keys and see their translated values."
focus_mode = 0
theme = ExtResource("3_sb83f")
icon = ExtResource("3")

[node name="SaveButton" type="Button" parent="TextContainer/HBoxContainer/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
tooltip_text = "Save any changes made to the contents of a key (edits made in the bottom input field). 
Will replace existing text associated with a key or append if it is a new key. 
You can create new files here too by selecting a file that does not exist."
focus_mode = 0
theme = ExtResource("3_sb83f")
disabled = true
icon = ExtResource("6")

[node name="Control" type="Control" parent="TextContainer/HBoxContainer"]
visible = false
layout_mode = 2

[node name="PopupContainer" type="Node" parent="."]

[node name="FileDialog" type="FileDialog" parent="PopupContainer"]
size = Vector2i(475, 650)
filters = PackedStringArray("*.csv")

[node name="TextEditPopup" type="PopupPanel" parent="PopupContainer"]
size = Vector2i(400, 500)

[node name="VBoxContainer" type="VBoxContainer" parent="PopupContainer/TextEditPopup"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 4.0
offset_top = 4.0
offset_right = -756.0
offset_bottom = -152.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="HeaderContainer" type="PanelContainer" parent="PopupContainer/TextEditPopup/VBoxContainer"]
layout_mode = 2

[node name="TitleLabel" type="Label" parent="PopupContainer/TextEditPopup/VBoxContainer/HeaderContainer"]
layout_mode = 2
size_flags_horizontal = 3
text = "Edit Text:"
horizontal_alignment = 1
vertical_alignment = 1

[node name="PopoutTextEdit" type="TextEdit" parent="PopupContainer/TextEditPopup/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="HeaderContainer2" type="PanelContainer" parent="PopupContainer/TextEditPopup/VBoxContainer"]
layout_mode = 2

[node name="OKButton" type="Button" parent="PopupContainer/TextEditPopup/VBoxContainer/HeaderContainer2"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
text = "OK"
flat = true
icon_alignment = 1

[node name="HBoxContainer" type="HBoxContainer" parent="PopupContainer/TextEditPopup"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -1148.0
offset_top = 4.0
offset_right = -756.0
offset_bottom = 496.0
grow_horizontal = 0
size_flags_horizontal = 8
size_flags_vertical = 0
mouse_filter = 2
alignment = 2

[node name="ClosePopupButton" type="Button" parent="PopupContainer/TextEditPopup/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 0
text = "x"
flat = true

[connection signal="key_selected" from="KeyInput/TitleLabel/TranslationKeyBrowserPopup" to="." method="_on_TranslationKeyBrowserPopup_key_selected"]
[connection signal="text_changed" from="KeyInput/KeyInput" to="." method="_on_KeyInput_text_changed"]
[connection signal="item_selected" from="KeyInput/LanguageSelectButton" to="." method="_on_LanguageSelectButton_item_selected"]
[connection signal="pressed" from="TextContainer/HBoxContainer/VBoxContainer/ShowTextPopoutButton" to="." method="_on_ShowTextPopoutButton_pressed"]
[connection signal="pressed" from="TextContainer/HBoxContainer/VBoxContainer/PickerButton" to="." method="_on_PickerButton_pressed"]
[connection signal="pressed" from="TextContainer/HBoxContainer/VBoxContainer/SaveButton" to="." method="_on_SaveButton_pressed"]
[connection signal="file_selected" from="PopupContainer/FileDialog" to="." method="_on_FileDialog_file_selected"]
[connection signal="text_changed" from="PopupContainer/TextEditPopup/VBoxContainer/PopoutTextEdit" to="." method="_on_PopoutTextEdit_text_changed"]
[connection signal="pressed" from="PopupContainer/TextEditPopup/VBoxContainer/HeaderContainer2/OKButton" to="PopupContainer/TextEditPopup" method="hide"]
[connection signal="pressed" from="PopupContainer/TextEditPopup/HBoxContainer/ClosePopupButton" to="PopupContainer/TextEditPopup" method="hide"]
